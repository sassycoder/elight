var initPhotoSwipeFromDOM=function(a){"use strict";for(var b,c,d=function(a){for(var b,d,e,f,g=a.childNodes,h=g.length,i=[],j=0;h>j;j++)b=g[j],1===b.nodeType&&(d=b.children[0],e=d.getAttribute("data-size").split("x"),f={src:d.getAttribute("href"),w:parseInt(e[0],10),h:parseInt(e[1],10),bgColor:$(d).css("background-color")},b.children.length>1&&(f.title=b.children[1].innerHTML),c&&(f.hotspots=$(b).find(".cqtooltip-wrapper")[0].outerHTML),d.children.length>0&&(f.msrc=d.children[0].getAttribute("src")),f.el=b,i.push(f));return i},e=function m(a,b){return a&&(b(a)?a:m(a.parentNode,b))},f=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,d=e(b,function(a){return a.tagName&&"FIGURE"===a.tagName.toUpperCase()});if(d){var f,g=d.parentNode,i=d.parentNode.childNodes,j=i.length,k=0;c=$(g).hasClass("hotspot");for(var l=0;j>l;l++)if(1===i[l].nodeType){if(i[l]===d){f=k;break}k++}return f>=0&&h(f,g),!1}},g=function(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},h=function(a,e,f,g){function h(){var a=$(".pswp--open").find(".pswp__counter")[0].innerHTML.replace(/ /g,""),b=$(".pswp--open").find(".pswp__caption__center");$(".wrapper-caption").html('<div class="pswp__counter">'+a+"</div>"+b[b.length-1].innerHTML)}function i(){return o.items[0].w/(o.getZoomLevel()*o.items[0].w)}function j(){$(".pswp__zoom-wrap .hotspot-item").css({"-webkit-transform":"translate3d(0, 0, 0) scale("+i()+")",transform:"translate3d(0, 0, 0) scale("+i()+")"})}function k(){var a=$(".pswp--open").find(".pswp__zoom-wrap")[0];$(a).html(o.items[0].hotspots),$(a).find(".cqtooltip-wrapper").css({width:o.items[0].w+"px",height:o.items[0].h+"px"}),b=$(".pswp__zoom-wrap .hotspot-item").length,$(".pswp__counter").html("1/"+b).append($(".pswp__zoom-wrap .cq-tooltip").eq(0).data("tooltip")),$(".pswp__zoom-wrap .hotspot-item").css({"-webkit-transform":"translate3d(0, 0, 0) scale("+i()+")",transform:"translate3d(0, 0, 0) scale("+i()+")"}).eq(0).find(".cq-tooltip").addClass("active"),n(o.getCurrentIndex()),$(".pswp__zoom-wrap .cq-tooltip").on("click",function(a){var c=$(this),d=c.find("i").text(),e=c.data("tooltip");$(".pswp__counter").html(d+"/"+b).append(e),$(".pswp__zoom-wrap .cq-tooltip").removeClass("active"),c.addClass("active"),a.preventDefault()}),$(".pswp__zoom-wrap").attrchange({trackValues:!1,callback:function(){window.requestAnimationFrame(j)}})}function l(){$(".carousel").slick("slickPause")}function m(){$(".carousel").slick("slickPlay")}function n(a){var b;c?b=".cqtooltip-wrapper img":".pswp__img",$(b).css("background-color",s[a])}var o,p,q,r=document.querySelectorAll(".pswp")[0],s=[],t=!0;if(q=d(e),p={history:!1,closeOnVerticalDrag:!1,showHideOpacity:!0,zoomEl:!0,shareEl:!1,fullscreenEl:!1,allowPanToNext:!1,preload:[1,3],tapToToggleControls:c?!1:!0},g)if(p.galleryPIDs){for(var u=0;u<q.length;u++)if(q[u].pid==a){p.index=u;break}}else p.index=parseInt(a,10)-1;else p.index=parseInt(a,10);isNaN(p.index)||(f&&(p.showAnimationDuration=0),o=new PhotoSwipe(r,PhotoSwipeUI_Default,q,p),o.listen("afterChange",function(){h(),n(o.getCurrentIndex())}),o.listen("gettingData",function(){if(t){for(var a=0,b=o.items.length;b>a;a++)s.push(o.items[a].bgColor);t=!1}}),o.listen("destroy",function(){m()}),o.init(),h(),l(),c&&k())},i=document.querySelectorAll(a),j=0,k=i.length;k>j;j++)i[j].setAttribute("data-pswp-uid",j+1),i[j].onclick=f;var l=g();l.pid&&l.gid&&h(l.pid,i[l.gid-1],!0,!0)};initPhotoSwipeFromDOM(".js-modal"),$(function(){"use strict";var a,b,c=$(".single-image-modal"),d=[],e=[];c.each(function(){a=$(this),a.find("a").each(function(){var a=$(this).attr("href"),b=$(this).css("background-color"),c=$(this).data("size").split("x"),e=c[0],f=c[1],g=$(this).next("figcaption").html(),h=this,i={src:a,w:e,h:f,title:g,el:h,bgColor:b};d.push(i)})});var f=$(".pswp")[0];$(".single-image-modal").on("click","figure",function(a){function g(){var a=$(".pswp--open").find(".pswp__counter")[0].innerHTML.replace(/ /g,""),b=$(".pswp--open").find(".pswp__caption__center");$(".wrapper-caption").html('<div class="pswp__counter">'+a+"</div>"+b[b.length-1].innerHTML)}function h(){$(".carousel").slick("slickPause")}function i(){$(".carousel").slick("slickPlay")}function j(a){$(".pswp__img").css("background-color",e[a])}a.preventDefault(),b=c.index($(this).closest(".single-image-modal"));var k={history:!1,closeOnVerticalDrag:!1,showHideOpacity:!0,zoomEl:!0,shareEl:!1,fullscreenEl:!1,allowPanToNext:!1,preload:[1,3],index:b},l=!0,m=new PhotoSwipe(f,PhotoSwipeUI_Default,d,k);m.listen("afterChange",function(){g(),j(m.getCurrentIndex())}),m.listen("gettingData",function(){if(l){for(var a=0,b=m.items.length;b>a;a++)e.push(m.items[a].bgColor);l=!1}}),m.listen("destroy",function(){i()}),m.init(),g(),h()})}),$(function(){"use strict";$("video").each(function(){var a={iPhoneUseNativeControls:!1};$(this).mediaelementplayer(a)})});